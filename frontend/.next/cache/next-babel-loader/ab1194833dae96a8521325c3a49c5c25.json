{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\git Repository\\\\PersonalProject_001\\\\frontend\\\\pages\\\\detailPage.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useCallback, useEffect, useState, createRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Home from '../components/mainPosts_1001/mainPosts_1001';\nimport Comments1001 from '../components/mainPosts_1001/mainPosts_1001_comments';\nimport CommentTextArea from '../components/mainPosts_1001/mainPosts_1001_textArea';\nimport { MAINPOSTS_1001_DETAIL_INFO_REQUEST, MAINPOSTS_1001_COMMENTS_REQUEST, MAINPOSTS_1001_COMMENTINSERT_REQUEST, MAINPOSTS_1001_COMMENTLIKE_REQUEST } from '../reducers/mainPosts_1001';\nimport { DislikeTwoTone, LikeTwoTone, UserOutlined, FieldTimeOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport custumDateFormat from '../utilComponent/custumDateFormat';\n\nvar detailPage = function detailPage(_ref) {\n  _s();\n\n  var nickName = _ref.nickName,\n      postFlag = _ref.postFlag,\n      postId = _ref.postId;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.mainPosts_1001;\n  }),\n      mainPosts_1001Info = _useSelector.mainPosts_1001Info,\n      mainPosts_1001Comments = _useSelector.mainPosts_1001Comments;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.auth;\n  }),\n      userInfo = _useSelector2.userInfo;\n\n  var blank_pattern = /^\\s+|\\s+&/g;\n\n  var _useState = useState([]),\n      mainPosts_1001_commentsArray = _useState[0],\n      setMainPosts_1001_commentsArray = _useState[1];\n\n  var _useState2 = useState(''),\n      insertClick = _useState2[0],\n      setInsertClick = _useState2[1];\n\n  useEffect(function () {\n    console.log('읭?'); //댓글 리스트 \n\n    dispatch({\n      type: MAINPOSTS_1001_COMMENTS_REQUEST,\n      data: {\n        postId: postId,\n        nickName: nickName,\n        postFlag: postFlag,\n        who: userInfo\n      }\n    }); //상세 정보 \n\n    dispatch({\n      type: MAINPOSTS_1001_DETAIL_INFO_REQUEST,\n      data: {\n        postId: postId,\n        nickName: nickName,\n        postFlag: postFlag\n      }\n    });\n    setMainPosts_1001_commentsArray(_toConsumableArray(mainPosts_1001Comments));\n  }, [mainPosts_1001Comments.length > 0]); //일단 이걸 넣어야 처음에 로드 될 때 \n  // setMainPosts_1001_commentsArray([...mainPosts_1001Comments]); 이게 실행되면서 \n  //댓글 리스트가 나온다.. 왜 이런건지는 모르겠다. \n  //좋아요, 싫어요 버튼 \n\n  var likeBtn = useCallback(function (commentid, flag, likeDislike) {\n    if (!userInfo) {\n      alert('로그인이 필요한 서비스 입니다.');\n      return;\n    }\n\n    if (flag === \"Y\") {\n      alert('이미 좋아요! 싫어요! 했습니다.');\n      return;\n    } else {\n      setMainPosts_1001_commentsArray(_toConsumableArray(mainPosts_1001Comments));\n      mainPosts_1001Comments.map(function (v, i) {\n        if (v.commentId === commentid) {\n          mainPosts_1001_commentsArray[i] = _objectSpread(_objectSpread({}, mainPosts_1001Comments[i]), {}, {\n            clickedComponent: commentid,\n            flag: 'Y',\n            likeDislikeflag: likeDislike\n          });\n        }\n      }); //     setMainPosts_1001_commentsArray(prev=>[...mainPosts_1001_commentsArray,prev]); \n\n      setMainPosts_1001_commentsArray(_toConsumableArray(mainPosts_1001_commentsArray)); //댓글 좋아요!\n\n      dispatch({\n        type: MAINPOSTS_1001_COMMENTLIKE_REQUEST,\n        data: {\n          commentid: commentid,\n          postFlag: postFlag,\n          postId: postId,\n          flag: likeDislike,\n          who: userInfo,\n          nickName: nickName\n        }\n      });\n    }\n\n    alert(\"\".concat(likeDislike));\n  }, [mainPosts_1001Comments, mainPosts_1001_commentsArray]); //댓글 입력 \n\n  var insertComment = useCallback(function (postFlag, postId, nickName, comment) {\n    if (comment.length === 0 || comment.replace(blank_pattern, '') === \"\") {\n      alert('댓글을 입력해 주세요!');\n      return;\n    }\n\n    if (comment.length === 300) {\n      alert('300자 이상 입력 할 수 없습니다.');\n      return;\n    }\n\n    setMainPosts_1001_commentsArray(_toConsumableArray(mainPosts_1001Comments)); //댓글 입력\n\n    dispatch({\n      type: MAINPOSTS_1001_COMMENTINSERT_REQUEST,\n      data: {\n        postId: postId,\n        postFlag: postFlag,\n        nickName: nickName,\n        who: userInfo,\n        comment: comment\n      }\n    }); //console.log('mainPosts_1001Comments=>' , mainPosts_1001Comments); \n    //\n    //댓글 리스트 \n    //   dispatch({\n    //     type:MAINPOSTS_1001_COMMENTS_REQUEST, \n    //     data:{\n    //       postId,\n    //       nickName,\n    //       postFlag,\n    //       who:userInfo,\n    //     }\n    // }); \n\n    console.log('빠락스 비어 Array=>', mainPosts_1001_commentsArray);\n    setMainPosts_1001_commentsArray([mainPosts_1001Comments[0]].concat(_toConsumableArray(mainPosts_1001_commentsArray))); //\n  }, [mainPosts_1001Comments]);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"divTable\",\n    style: {\n      marginTop: '3%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"divTableRowTh\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"divTableCellTh\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, mainPosts_1001Info[0].title, \" [\", mainPosts_1001Comments.length, \"]\")), __jsx(\"div\", {\n    className: \"divTableRow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 12\n    }\n  }, __jsx(\"div\", {\n    className: \"divTableCell\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, __jsx(UserOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }), \"  \", mainPosts_1001Info[0].userNickName, __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 73\n    }\n  }), __jsx(FieldTimeOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }), \"  \", custumDateFormat(mainPosts_1001Info[0].createdDate), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 95\n    }\n  }), __jsx(LikeTwoTone, {\n    twoToneColor: \"#1ba640\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }), \" : \", mainPosts_1001Info[0].good, \" \", __jsx(DislikeTwoTone, {\n    twoToneColor: \"#1ba640\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 88\n    }\n  }), \" : \", mainPosts_1001Info[0].bad))), __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"auto\",\n      border: \"1px solid\",\n      borderColor: \"#8cc49c\",\n      marginTop: \"1%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, \"\\uAD11\\uACE0\\uC785\\uB2C8\\uB2E4.\"), __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      marginTop: \"1%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 6\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: mainPosts_1001Info[0].content\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"auto\",\n      border: \"1px solid\",\n      borderColor: \"#8cc49c\",\n      marginTop: \"1%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 5\n    }\n  }, \"\\uAD11\\uACE0\\uC785\\uB2C8\\uB2E4.\"), __jsx(\"div\", {\n    className: \"divTable\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"divTableRowTh\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, __jsx(LikeTwoTone, {\n    twoToneColor: \"#1ba640\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 19\n    }\n  })), \"\\xA0\\xA0\\xA0\\xA0\", __jsx(Button, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 90\n    }\n  }, __jsx(DislikeTwoTone, {\n    twoToneColor: \"#1ba640\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 98\n    }\n  })))), __jsx(CommentTextArea, {\n    postFlag: postFlag,\n    nickName: nickName,\n    postId: postId,\n    userInfo: userInfo,\n    insertComment: insertComment,\n    insertClick: insertClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 4\n    }\n  }), __jsx(\"div\", {\n    className: \"divTable\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 5\n    }\n  }, mainPosts_1001_commentsArray.map(function (v, i) {\n    return __jsx(Comments1001, {\n      key: i,\n      postFlag: postFlag,\n      nickName: nickName,\n      postId: postId,\n      userInfo: userInfo,\n      commentId: v.commentId,\n      comment: v.comment,\n      who: v.who,\n      flag: v.flag,\n      good: v.good,\n      bad: v.bad,\n      createdDate: v.createdDate,\n      likeBtn: likeBtn,\n      clickedComponent: v.clickedComponent,\n      likeDislikeflag: v.likeDislikeflag,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }\n    });\n  })));\n};\n\n_s(detailPage, \"IjjmBrcWjxP9GOEb8C9l/sNLQH0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\ndetailPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var postId, nickName, postFlag;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            postId = context.query.postId;\n            nickName = context.query.nickName;\n            postFlag = context.query.postFlag;\n            return _context.abrupt(\"return\", {\n              nickName: nickName,\n              postFlag: postFlag,\n              postId: postId\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default detailPage;","map":{"version":3,"sources":["D:/git Repository/PersonalProject_001/frontend/pages/detailPage.js"],"names":["React","useCallback","useEffect","useState","createRef","useDispatch","useSelector","Home","Comments1001","CommentTextArea","MAINPOSTS_1001_DETAIL_INFO_REQUEST","MAINPOSTS_1001_COMMENTS_REQUEST","MAINPOSTS_1001_COMMENTINSERT_REQUEST","MAINPOSTS_1001_COMMENTLIKE_REQUEST","DislikeTwoTone","LikeTwoTone","UserOutlined","FieldTimeOutlined","Button","custumDateFormat","detailPage","nickName","postFlag","postId","dispatch","state","mainPosts_1001","mainPosts_1001Info","mainPosts_1001Comments","auth","userInfo","blank_pattern","mainPosts_1001_commentsArray","setMainPosts_1001_commentsArray","insertClick","setInsertClick","console","log","type","data","who","length","likeBtn","commentid","flag","likeDislike","alert","map","v","i","commentId","clickedComponent","likeDislikeflag","insertComment","comment","replace","marginTop","title","userNickName","createdDate","good","bad","width","height","border","borderColor","display","justifyContent","alignItems","__html","content","getInitialProps","context","query"],"mappings":"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","sourcesContent":["import React, { useCallback,useEffect, useState, createRef } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Home from '../components/mainPosts_1001/mainPosts_1001'\r\nimport Comments1001 from '../components/mainPosts_1001/mainPosts_1001_comments'\r\nimport CommentTextArea from '../components/mainPosts_1001/mainPosts_1001_textArea'\r\nimport \r\n    {MAINPOSTS_1001_DETAIL_INFO_REQUEST,\r\n     MAINPOSTS_1001_COMMENTS_REQUEST, \r\n     MAINPOSTS_1001_COMMENTINSERT_REQUEST,\r\n     MAINPOSTS_1001_COMMENTLIKE_REQUEST\r\n    } \r\nfrom '../reducers/mainPosts_1001'; \r\n\r\nimport {DislikeTwoTone,LikeTwoTone , UserOutlined, FieldTimeOutlined} from '@ant-design/icons'\r\nimport {Button} from 'antd'\r\nimport custumDateFormat from  '../utilComponent/custumDateFormat';\r\n\r\n\r\n\r\nconst detailPage  = ({nickName,postFlag,postId}) =>{\r\n\r\n  const dispatch = useDispatch(); \r\n  const {mainPosts_1001Info , \r\n         mainPosts_1001Comments,\r\n        } = useSelector((state)=>state.mainPosts_1001); \r\n\r\n  const {userInfo}      = useSelector((state)=>state.auth);\r\n\r\n  const blank_pattern = /^\\s+|\\s+&/g;  \r\n  const [mainPosts_1001_commentsArray, setMainPosts_1001_commentsArray] = useState([]); \r\n  const [insertClick, setInsertClick] = useState(''); \r\n\r\n\r\n  useEffect(()=>{\r\n  \r\n    console.log('읭?'); \r\n    //댓글 리스트 \r\n    dispatch({\r\n      type:MAINPOSTS_1001_COMMENTS_REQUEST, \r\n      data:{\r\n        postId,\r\n        nickName,\r\n        postFlag,\r\n        who:userInfo, \r\n      }\r\n    }); \r\n\r\n    //상세 정보 \r\n    dispatch({\r\n          type:MAINPOSTS_1001_DETAIL_INFO_REQUEST, \r\n          data:{\r\n            postId,\r\n            nickName,\r\n            postFlag,\r\n          }\r\n    });\r\n    \r\n    setMainPosts_1001_commentsArray([...mainPosts_1001Comments]); \r\n   \r\n\r\n  },[mainPosts_1001Comments.length > 0]);\r\n     //일단 이걸 넣어야 처음에 로드 될 때 \r\n     // setMainPosts_1001_commentsArray([...mainPosts_1001Comments]); 이게 실행되면서 \r\n     //댓글 리스트가 나온다.. 왜 이런건지는 모르겠다. \r\n\r\n\r\n\r\n \r\n  //좋아요, 싫어요 버튼 \r\n  const likeBtn =useCallback((commentid,flag,likeDislike)=>{\r\n      if(!userInfo){\r\n        alert('로그인이 필요한 서비스 입니다.'); \r\n        return;\r\n      }\r\n\r\n      if(flag===\"Y\"){\r\n        \r\n        alert('이미 좋아요! 싫어요! 했습니다.'); \r\n        return; \r\n  \r\n      }else{\r\n\r\n        setMainPosts_1001_commentsArray([...mainPosts_1001Comments]);\r\n        mainPosts_1001Comments.map((v,i)=>{\r\n          if(v.commentId === commentid){\r\n            mainPosts_1001_commentsArray[i] = {...mainPosts_1001Comments[i], clickedComponent:commentid,flag:'Y', likeDislikeflag:likeDislike}\r\n          }\r\n        });  \r\n   //     setMainPosts_1001_commentsArray(prev=>[...mainPosts_1001_commentsArray,prev]); \r\n         setMainPosts_1001_commentsArray([...mainPosts_1001_commentsArray]); \r\n        //댓글 좋아요!\r\n        dispatch({\r\n          type:MAINPOSTS_1001_COMMENTLIKE_REQUEST, \r\n          data:{\r\n            commentid,\r\n            postFlag,\r\n            postId,\r\n            flag: likeDislike ,\r\n            who: userInfo,\r\n            nickName,\r\n          }\r\n      }); \r\n\r\n    }\r\n\r\n     alert(`${likeDislike}`); \r\n    \r\n    },[mainPosts_1001Comments , mainPosts_1001_commentsArray]); \r\n\r\n\r\n\r\n\r\n  //댓글 입력 \r\n  const insertComment = useCallback((postFlag,postId,nickName ,comment)=>{\r\n    if(comment.length === 0 || comment.replace(blank_pattern,'')===\"\"){\r\n      \r\n         \r\n        alert('댓글을 입력해 주세요!'); \r\n          return; \r\n        }\r\n    \r\n        if(comment.length === 300){\r\n          alert('300자 이상 입력 할 수 없습니다.'); \r\n          return; \r\n        }\r\n\r\n        setMainPosts_1001_commentsArray([...mainPosts_1001Comments]); \r\n          //댓글 입력\r\n          dispatch({\r\n            type:MAINPOSTS_1001_COMMENTINSERT_REQUEST, \r\n            data:{\r\n              postId,\r\n              postFlag,\r\n              nickName ,\r\n              who:userInfo, \r\n              comment,\r\n            }\r\n        });\r\n        //console.log('mainPosts_1001Comments=>' , mainPosts_1001Comments); \r\n        //\r\n       \r\n       \r\n         //댓글 리스트 \r\n        //   dispatch({\r\n        //     type:MAINPOSTS_1001_COMMENTS_REQUEST, \r\n        //     data:{\r\n          \r\n        //       postId,\r\n        //       nickName,\r\n        //       postFlag,\r\n        //       who:userInfo,\r\n        //     }\r\n        // }); \r\n        console.log('빠락스 비어 Array=>' , mainPosts_1001_commentsArray); \r\n         setMainPosts_1001_commentsArray([mainPosts_1001Comments[0],...mainPosts_1001_commentsArray]);\r\n\r\n       //\r\n\r\n\r\n      },[mainPosts_1001Comments ]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n      \r\n    <>\r\n    {/*상세 페이지 타이틀--------------------------------------------------------------------------------*/}\r\n      <div className='divTable' style={{marginTop:'3%'}}>\r\n            <div className='divTableRowTh'>\r\n                <div className='divTableCellTh'>{mainPosts_1001Info[0].title} [{mainPosts_1001Comments.length}]</div>\r\n           </div>\r\n           <div className='divTableRow'>\r\n                <div className='divTableCell'>\r\n                  <UserOutlined />  {mainPosts_1001Info[0].userNickName}<br />\r\n                  <FieldTimeOutlined />  {custumDateFormat(mainPosts_1001Info[0].createdDate)}<br />\r\n                  <LikeTwoTone twoToneColor=\"#1ba640\"/> : {mainPosts_1001Info[0].good} <DislikeTwoTone  twoToneColor=\"#1ba640\"/> : {mainPosts_1001Info[0].bad} \r\n                </div>\r\n           </div>\r\n      </div>\r\n    {/*상세 페이지 타이틀--------------------------------------------------------------------------------*/}\r\n\r\n      <div style={{width:\"100%\",height:\"auto\", border:\"1px solid\", borderColor:\"#8cc49c\",marginTop:\"1%\"}}>\r\n         광고입니다.\r\n      </div>\r\n   \r\n\r\n\r\n\r\n\r\n\r\n    {/*상세 페이지 컨텐츠--------------------------------------------------------------------------------*/}\r\n     <div style={{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",marginTop:\"1%\"}}>\r\n        <div dangerouslySetInnerHTML={{__html:mainPosts_1001Info[0].content}}/>\r\n     </div> \r\n    {/*상세 페이지 컨텐츠--------------------------------------------------------------------------------*/}   \r\n    \r\n\r\n\r\n\r\n\r\n    <div style={{width:\"100%\",height:\"auto\", border:\"1px solid\", borderColor:\"#8cc49c\",marginTop:\"1%\"}}>\r\n      광고입니다.\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n     {/*좋아요 싫어요 버튼--------------------------------------------------------------------------------*/}\r\n    <div className='divTable'>\r\n      <div className='divTableRowTh' style={{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}}>\r\n          <Button><LikeTwoTone  twoToneColor=\"#1ba640\"/></Button>&nbsp;&nbsp;&nbsp;&nbsp;<Button><DislikeTwoTone twoToneColor=\"#1ba640\"/></Button>\r\n      </div>\r\n    </div>\r\n    {/*좋아요 싫어요 버튼--------------------------------------------------------------------------------*/}\r\n\r\n\r\n\r\n\r\n\r\n    {/*댓글 입력--------------------------------------------------------------------------------*/}\r\n   <CommentTextArea   \r\n            postFlag={postFlag} \r\n            nickName={nickName} \r\n            postId={postId} \r\n            userInfo={userInfo}\r\n            insertComment={insertComment}\r\n            insertClick={insertClick}\r\n   />\r\n    {/* \r\n    <textarea  value={comment} ref={ref} style={{width:\"100%\",height:\"80px\",marginTop:\"3%\"}} onChange={onChageComment} placeholder={ userInfo ? \"댓글을 작성해 보세요!\" : \"로그인이 필요한 서비스 입니다.\"} readOnly={userInfo ? false : true}/>\r\n   \r\n    <div style={{margin:\"1%\",display:\"block\",float:\"left\"}}>\r\n      {comment ? comment.length  : 0 } &#47; 300\r\n    </div>\r\n\r\n    <div style={{margin:\"1%\",display:\"block\",float:\"right\"}}>\r\n      <Button type=\"primary\" onClick={insertComment}>댓글달기</Button>\r\n    </div>\r\n  */}\r\n    {/*댓글 입력--------------------------------------------------------------------------------*/}\r\n\r\n\r\n\r\n\r\n    {/*댓글 리스트--------------------------------------------------------------------------------*/}\r\n\r\n    <div className=\"divTable\">\r\n      { mainPosts_1001_commentsArray.map((v,i)=>\r\n\r\n        <Comments1001 \r\n              key={i}\r\n              postFlag={postFlag} \r\n              nickName={nickName} \r\n              postId={postId} \r\n              userInfo={userInfo}\r\n    \r\n              commentId={v.commentId} \r\n              comment={v.comment} \r\n              who={v.who} \r\n              flag={v.flag} \r\n\r\n              good={v.good}\r\n              bad={v.bad}      \r\n              createdDate={v.createdDate} \r\n    \r\n              likeBtn={likeBtn}\r\n\r\n              clickedComponent={v.clickedComponent}\r\n              likeDislikeflag={v.likeDislikeflag}\r\n              />\r\n      )\r\n    \r\n    }\r\n    </div>\r\n    {/*댓글 리스트--------------------------------------------------------------------------------*/}\r\n\r\n    </>\r\n        )\r\n}\r\n\r\n\r\ndetailPage.getInitialProps = async (context) =>{\r\n\r\n  const postId   = context.query.postId; \r\n  const nickName = context.query.nickName; \r\n  const postFlag = context.query.postFlag; \r\n  return {nickName,postFlag,postId}; \r\n}\r\nexport default detailPage; "]},"metadata":{},"sourceType":"module"}